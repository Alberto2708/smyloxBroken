<UserControl x:Class="SmyloxFirstUI.View.Modelling.CloseBaseView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:h="http://helix-toolkit.org/wpf"
             xmlns:local="clr-namespace:SmyloxFirstUI.View.Modelling"
             xmlns:vm="clr-namespace:SmyloxFirstUI.ViewModel.Modelling"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             Background="#0B1120">
    <Grid>
        <!-- Layout: top bar + sidebar + 3D viewport -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top bar -->
        <Border Grid.Row="0"
                Grid.ColumnSpan="2"
                Background="#020617">
            <DockPanel LastChildFill="True" Margin="16,0">
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Center">
                    <TextBlock Text="SmyloxAligner"
                               Foreground="White"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Margin="0,0,12,0"/>
                    <TextBlock Text="— STL viewer (upper / lower)"
                               Foreground="#9CA3AF"
                               FontSize="13"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Sidebar -->
        <Border Grid.Row="1"
                Grid.Column="0"
                Background="#020617"
                BorderBrush="#1F2937"
                BorderThickness="0,1,1,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="16"
                            Orientation="Vertical">

                    <Separator Margin="0,8,0,8"/>

                    <TextBlock Text="View"
                               Foreground="White"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,0,0,6"/>

                    <Button x:Name="BtnResetCamera"
                            Content="Reset camera"
                            Click="BtnResetCamera_Click"
                            Margin="0,0,0,12"
                            Padding="10,6"
                            Background="#111827"
                            Foreground="#E5E7EB"
                            BorderBrush="#374151"
                            BorderThickness="1"
                            FontSize="13"
                            Cursor="Hand"/>

                    <!-- Placeholder for future: Close mesh, segmentation, etc -->
                    <!--<Button Content="Close upper mesh" Margin="0,0,0,4"/>
                    <Button Content="Close lower mesh" Margin="0,0,0,16"/>-->

                    <StackPanel Margin="0,24,0,0">
                        <TextBlock Text="Status"
                                   Foreground="#9CA3AF"
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,4"/>
                        <TextBlock x:Name="TxtStatus"
                                   Text="Ready"
                                   TextWrapping="Wrap"
                                   Foreground="#9CA3AF"
                                   FontSize="12"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- 3D Viewport -->
        <Border Grid.Row="1"
                Grid.Column="1"
                Background="#020617"
                BorderBrush="#1F2937"
                BorderThickness="0,1,0,0">
            <h:HelixViewport3D x:Name="View3D"
                               Background="#020617"
                               ZoomExtentsWhenLoaded="True"
                               ShowCoordinateSystem="True"
                               ShowViewCube="True"
                               RotateAroundMouseDownPoint="True">

                <!-- Lights -->
                <h:DefaultLights />

                <!-- Upper and lower jaws -->
                <ModelVisual3D x:Name="UpperModelVisual">
                    <ModelVisual3D.Content>
                        <GeometryModel3D Geometry="{Binding UpperJawMesh.GeometryModel.Geometry}"
                                     Material="{Binding UpperJawMesh.GeometryModel.Material}"
                                     BackMaterial="{Binding UpperJawMesh.GeometryModel.BackMaterial}"/>
                    </ModelVisual3D.Content>
                </ModelVisual3D>

                <ModelVisual3D x:Name="LowerModelVisual">
                    <ModelVisual3D.Content>
                        <GeometryModel3D Geometry="{Binding LowerJawMesh.GeometryModel.Geometry}"
                                     Material="{Binding LowerJawMesh.GeometryModel.Material}"
                                     BackMaterial="{Binding LowerJawMesh.GeometryModel.BackMaterial}"/>
                    </ModelVisual3D.Content>
                </ModelVisual3D>


            </h:HelixViewport3D>
        </Border>

    </Grid>
</UserControl>
